(this["webpackJsonppitch-detection"]=this["webpackJsonppitch-detection"]||[]).push([[0],{47:function(e,t,a){e.exports=a(74)},52:function(e,t,a){},60:function(e,t){},61:function(e,t){},62:function(e,t){},63:function(e,t){},64:function(e,t){},65:function(e,t){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(17),l=a.n(c),u=(a(52),a(53),a(26)),o=a(18),s=a.n(o),i=a(27),m=a(19),f=a(23),p=(a(46),function(e){var t=63.07*e+25.58;return 10*Math.pow(2,1*t/12)}),d=Object(n.createContext)(),E=function(){return Object(n.useContext)(d)},b=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(m.a)(a,2),l=c[0],u=c[1],o=Object(n.useState)(!1),p=Object(m.a)(o,2),E=p[0],b=p[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a("https://tfhub.dev/google/tfjs-model/spice/2/default/1",{fromTFHub:!0});case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(d.Provider,{value:{model:l,start:E,setStart:b}},t)},h=a(76),v=a(81),j=a(82),g=function(){var e=E().model,t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(0),o=Object(m.a)(u,2),d=o[0],b=o[1],g=Object(n.useRef)(null),k=function(t){g.current=new AudioContext({latencyHint:"playback",sampleRate:16e3});var a=g.current.createMediaStreamSource(t),n=g.current.createScriptProcessor(1024,1,1);n.channelInterpretation="speakers",n.channelCount=1,a.connect(n),n.connect(g.current.destination),n.onaudioprocess=function(){var t=Object(i.a)(s.a.mark((function t(a){var n,r,c,l,u,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.inputBuffer.getChannelData(0),r=f.b(f.c(n),[1024]),c=e.execute({input_audio_samples:r}),l=c[0].dataSync(),u=c[1].dataSync(),console.log(g.current.sampleRate),o=0;case 7:if(!(o<u.length)){t.next=15;break}if(!(1-l[o]<.9)){t.next=11;break}return t.abrupt("continue",12);case 11:b(p(u[o]));case 12:++o,t.next=7;break;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){l(e)};return Object(n.useEffect)((function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(k).catch(O),function(){g.current&&g.current.close(),console.log("Component unmounted")}}),[]),r.a.createElement(h.a,null,c&&r.a.createElement(v.a,{variant:"danger"},c),r.a.createElement(j.a,null,r.a.createElement(j.a.Header,null,0!==d&&(d>70&&d<165?r.a.createElement("span",{style:{justifyContent:"space-between"}},r.a.createElement("i",{className:"fas fa-male"}),r.a.createElement("p",{style:{float:"right"}},"male: ",d)):r.a.createElement("span",{style:{justifyContent:"space-between"}},r.a.createElement("i",{className:"fas fa-female"}),r.a.createElement("p",{style:{float:"right"}},"female: ",d))))))},k=a(44),O=a(80),y=a(79),S=a(77),w=a(78),x=function(){var e=E(),t=e.start,a=e.setStart,n=e.model;return r.a.createElement("header",null,r.a.createElement(O.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0},r.a.createElement(h.a,null,r.a.createElement(k.LinkContainer,{to:"/"},r.a.createElement(O.a.Brand,null,r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement(y.a,{className:"ml-auto"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Link,{onClick:function(e){a(!0)},disabled:t},r.a.createElement("i",{className:"fas fa-play"}),"Start"),r.a.createElement(y.a.Link,{onClick:function(e){a(!1)},disabled:!t},r.a.createElement("i",{className:"fas fa-stop-circle"}),"Stop")," "):r.a.createElement(S.a,{variant:"primary",disabled:!0},r.a.createElement(w.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"model loading...")))))};var C=function(){var e=E(),t=e.model,a=e.start;return r.a.createElement(u.BrowserRouter,null,r.a.createElement(x,null),r.a.createElement(h.a,null,t&&a&&r.a.createElement(g,null)))};l.a.render(r.a.createElement(b,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.fa6e15aa.chunk.js.map